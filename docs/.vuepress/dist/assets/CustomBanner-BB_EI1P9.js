import{f as H,u as N,g as b,h as D,i as P,j as L,_ as V,r as j,o as a,c,a as i,t as f,k as v,F,l as M,m as O,n as X,e as E,p as G,T as J,q as T,v as K,x as Q}from"./app-C5ZrYX_N.js";const R=H({__name:"CustomBanner",setup(z,{expose:d}){d();const u=N(),e=b(()=>{var t,n,o,s;return(n=(t=u.value)==null?void 0:t.customBanner)!=null&&n.heroImage?L((s=(o=u.value)==null?void 0:o.customBanner)==null?void 0:s.heroImage):null}),B=b(()=>{var t,n;return((n=(t=u.value)==null?void 0:t.customBanner)==null?void 0:n.buttons)||[]}),k=b(()=>u.value.customBanner.heroImageStyle||{}),x=b(()=>{var s;const{bgImageStyle:t,bgImage:n}=((s=u.value)==null?void 0:s.customBanner)||{},o=n?{overflow:"hidden",background:`url(${L(n)}) center/cover no-repeat`}:{};return t?{...o,...t}:o}),_=D([]),h=async()=>{var y,p;const t=await fetch("https://api.allorigins.win/raw?url=https://rss.panewslab.com/zh/tvsq/rss"),o=new DOMParser().parseFromString(await t.text(),"text/xml"),s=o.querySelectorAll("item"),S={title:((y=o.querySelector("channel > title"))==null?void 0:y.textContent)||"",description:((p=o.querySelector("channel > description"))==null?void 0:p.textContent)||"",items:Array.from(s).map(l=>{var r,m,C,I,q;return{title:((r=l.querySelector("title"))==null?void 0:r.textContent)||"",link:((m=l.querySelector("link"))==null?void 0:m.textContent)||"",description:((C=l.querySelector("description"))==null?void 0:C.textContent)||"",pubDate:((I=l.querySelector("pubDate"))==null?void 0:I.textContent)||"",author:((q=l.querySelector("author"))==null?void 0:q.textContent)||"",category:Array.from(l.querySelectorAll("category")).map(A=>A.textContent)}})};_.value=S.items};P(()=>{h()});const w=D(1),g={frontmatter:u,heroImage:e,buttons:B,heroImageStyle:k,bgImageStyle:x,news:_,getDatas:h,showLenth:w};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),U={class:"banner-brand__content"},W={key:0,class:"title"},Y={key:1,class:"description"},Z=["innerHTML"],$={key:3,class:"btn-group"},ee={key:0,class:"live"},te={class:"name"},ne={class:"date"},oe=["innerHTML","href"];function re(z,d,u,e,B,k){var _,h,w,g,t,n,o,s,S,y,p,l;const x=j("Xicons");return a(),c("section",{class:"banner-brand__wrapper",style:T({...e.bgImageStyle})},[i("div",U,[(h=(_=e.frontmatter)==null?void 0:_.customBanner)!=null&&h.title?(a(),c("h1",W,f((g=(w=e.frontmatter)==null?void 0:w.customBanner)==null?void 0:g.title),1)):v("",!0),(n=(t=e.frontmatter)==null?void 0:t.customBanner)!=null&&n.description?(a(),c("p",Y,f((s=(o=e.frontmatter)==null?void 0:o.customBanner)==null?void 0:s.description),1)):v("",!0),(y=(S=e.frontmatter)==null?void 0:S.customBanner)!=null&&y.tagline?(a(),c("p",{key:2,class:"tagline",innerHTML:(l=(p=e.frontmatter)==null?void 0:p.customBanner)==null?void 0:l.tagline},null,8,Z)):v("",!0),e.buttons.length>0?(a(),c("div",$,[(a(!0),c(F,null,M(e.buttons,(r,m)=>(a(),O(x,{class:X(r.type),key:m,icon:r.icon,text:r.text,link:r.link,"icon-size":"18","text-size":"14"},null,8,["class","icon","text","link"]))),128))])):v("",!0),E(J,{name:"fade"},{default:G(()=>[e.news.length?(a(),c("div",ee,[i("div",te,[d[1]||(d[1]=i("div",{class:"load"},[i("div",{class:"loading"}),i("span",null,"正在发生")],-1)),i("small",{class:"more",onClick:d[0]||(d[0]=r=>e.showLenth=e.showLenth>1?1:e.news.length)},f(e.showLenth>1?"收起":"更多")+"("+f(e.news.length)+")",1)]),(a(!0),c(F,null,M(e.news,(r,m)=>K((a(),c("div",{key:m},[i("div",ne,f(r.pubDate),1),i("a",{innerHTML:r.description,href:r.link,target:"_blank",style:T(`border-bottom: ${e.showLenth<=1&&"none;"}`)},null,12,oe)])),[[Q,m<e.showLenth]])),128))])):v("",!0)]),_:1})])],4)}const ae=V(R,[["render",re],["__scopeId","data-v-1d422e78"],["__file","CustomBanner.vue"]]);export{ae as default};
