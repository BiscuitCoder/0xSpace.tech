import{f as H,u as N,g as S,h as D,i as P,j as F,_ as V,r as j,o as l,c as i,a as s,t as h,k as v,F as M,l as T,m as O,n as X,e as E,p as G,T as J,q as B,v as K,x as Q}from"./app-u-Ihknpr.js";const R=H({__name:"CustomBanner",setup(z,{expose:d}){d();const u=N(),e=S(()=>{var t,o,r,a;return(o=(t=u.value)==null?void 0:t.customBanner)!=null&&o.heroImage?F((a=(r=u.value)==null?void 0:r.customBanner)==null?void 0:a.heroImage):null}),k=S(()=>{var t,o;return((o=(t=u.value)==null?void 0:t.customBanner)==null?void 0:o.buttons)||[]}),C=S(()=>u.value.customBanner.heroImageStyle||{}),x=S(()=>{var a;const{bgImageStyle:t,bgImage:o}=((a=u.value)==null?void 0:a.customBanner)||{},r=o?{overflow:"hidden",background:`url(${F(o)}) center/cover no-repeat`}:{};return t?{...r,...t}:r}),_=D([]),g=async()=>{var p,f;const t=await fetch("https://api.allorigins.win/raw?url=https://rss.panewslab.com/zh/tvsq/rss"),r=new DOMParser().parseFromString(await t.text(),"text/xml"),a=r.querySelectorAll("item"),w={title:((p=r.querySelector("channel > title"))==null?void 0:p.textContent)||"",description:((f=r.querySelector("channel > description"))==null?void 0:f.textContent)||"",items:Array.from(a).map(c=>{var n,m,I,L,q;return{title:((n=c.querySelector("title"))==null?void 0:n.textContent)||"",link:((m=c.querySelector("link"))==null?void 0:m.textContent)||"",description:((I=c.querySelector("description"))==null?void 0:I.textContent)||"",pubDate:((L=c.querySelector("pubDate"))==null?void 0:L.textContent)||"",author:((q=c.querySelector("author"))==null?void 0:q.textContent)||"",category:Array.from(c.querySelectorAll("category")).map(A=>A.textContent)}})};_.value=w.items};P(()=>{g()});const b=D(1),y={frontmatter:u,heroImage:e,buttons:k,heroImageStyle:C,bgImageStyle:x,news:_,getDatas:g,showLenth:b};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}}),U={class:"banner-brand__content"},W={key:0,class:"title"},Y={key:1,class:"description"},Z=["innerHTML"],$={key:3,class:"btn-group"},ee={key:0,class:"live"},te={class:"name"},ne={class:"date"},oe=["href"],re=["innerHTML"];function se(z,d,u,e,k,C){var _,g,b,y,t,o,r,a,w,p,f,c;const x=j("Xicons");return l(),i("section",{class:"banner-brand__wrapper",style:B({...e.bgImageStyle})},[s("div",U,[(g=(_=e.frontmatter)==null?void 0:_.customBanner)!=null&&g.title?(l(),i("h1",W,h((y=(b=e.frontmatter)==null?void 0:b.customBanner)==null?void 0:y.title),1)):v("",!0),(o=(t=e.frontmatter)==null?void 0:t.customBanner)!=null&&o.description?(l(),i("p",Y,h((a=(r=e.frontmatter)==null?void 0:r.customBanner)==null?void 0:a.description),1)):v("",!0),(p=(w=e.frontmatter)==null?void 0:w.customBanner)!=null&&p.tagline?(l(),i("p",{key:2,class:"tagline",innerHTML:(c=(f=e.frontmatter)==null?void 0:f.customBanner)==null?void 0:c.tagline},null,8,Z)):v("",!0),e.buttons.length>0?(l(),i("div",$,[(l(!0),i(M,null,T(e.buttons,(n,m)=>(l(),O(x,{class:X(n.type),key:m,icon:n.icon,text:n.text,link:n.link,"icon-size":"18","text-size":"14"},null,8,["class","icon","text","link"]))),128))])):v("",!0),E(J,{name:"fade"},{default:G(()=>[e.news.length?(l(),i("div",ee,[s("div",te,[d[1]||(d[1]=s("div",{class:"load"},[s("div",{class:"loading"}),s("span",null,"正在发生")],-1)),s("small",{class:"more",onClick:d[0]||(d[0]=n=>e.showLenth=e.showLenth>1?1:e.news.length)},h(e.showLenth>1?"收起":"更多")+"("+h(e.news.length)+")",1)]),(l(!0),i(M,null,T(e.news,(n,m)=>K((l(),i("div",{key:m},[s("div",ne,h(n.pubDate),1),s("a",{href:n.link,target:"_blank",rel:"noopener noreferrer",style:B(`border-bottom:${e.showLenth>1?"":"none"} ;`)},[s("div",null,[s("b",null,h(n.title),1)]),s("p",{innerHTML:n.description,style:B(`border-bottom: ${e.showLenth<=1&&"none;"}`)},null,12,re)],12,oe)])),[[Q,m<e.showLenth]])),128))])):v("",!0)]),_:1})])],4)}const le=V(R,[["render",se],["__scopeId","data-v-f30e6406"],["__file","CustomBanner.vue"]]);export{le as default};
