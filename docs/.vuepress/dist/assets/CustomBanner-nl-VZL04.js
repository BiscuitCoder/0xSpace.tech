import{g as H,u as T,h as B,i as D,j as P,k as L,_ as j,r as N,o as a,c,a as i,t as v,l as f,F,m as M,n as O,p as V,q as X,v as E,x as G}from"./app-CjVIHiB3.js";const J=H({__name:"CustomBanner",setup(z,{expose:d}){d();const u=T(),e=B(()=>{var t,n,o,s;return(n=(t=u.value)==null?void 0:t.customBanner)!=null&&n.heroImage?L((s=(o=u.value)==null?void 0:o.customBanner)==null?void 0:s.heroImage):null}),x=B(()=>{var t,n;return((n=(t=u.value)==null?void 0:t.customBanner)==null?void 0:n.buttons)||[]}),b=B(()=>u.value.customBanner.heroImageStyle||{}),k=B(()=>{var s;const{bgImageStyle:t,bgImage:n}=((s=u.value)==null?void 0:s.customBanner)||{},o=n?{overflow:"hidden",background:`url(${L(n)}) center/cover no-repeat`}:{};return t?{...o,...t}:o}),_=D([]),h=async()=>{var p,y;const t=await fetch("https://api.allorigins.win/raw?url=https://rss.panewslab.com/zh/tvsq/rss"),o=new DOMParser().parseFromString(await t.text(),"text/xml"),s=o.querySelectorAll("item"),w={title:((p=o.querySelector("channel > title"))==null?void 0:p.textContent)||"",description:((y=o.querySelector("channel > description"))==null?void 0:y.textContent)||"",items:Array.from(s).map(l=>{var r,m,C,I,q;return{title:((r=l.querySelector("title"))==null?void 0:r.textContent)||"",link:((m=l.querySelector("link"))==null?void 0:m.textContent)||"",description:((C=l.querySelector("description"))==null?void 0:C.textContent)||"",pubDate:((I=l.querySelector("pubDate"))==null?void 0:I.textContent)||"",author:((q=l.querySelector("author"))==null?void 0:q.textContent)||"",category:Array.from(l.querySelectorAll("category")).map(A=>A.textContent)}})};_.value=w.items};P(()=>{h()});const S=D(1),g={frontmatter:u,heroImage:e,buttons:x,heroImageStyle:b,bgImageStyle:k,news:_,getDatas:h,showLenth:S};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),K={class:"banner-brand__content"},Q={key:0,class:"title"},R={key:1,class:"description"},U=["innerHTML"],W={key:3,class:"btn-group"},Y={key:4,class:"live"},Z={class:"name"},$={class:"date"},ee=["innerHTML","href"];function te(z,d,u,e,x,b){var _,h,S,g,t,n,o,s,w,p,y,l;const k=N("Xicons");return a(),c("section",{class:"banner-brand__wrapper",style:G({...e.bgImageStyle})},[i("div",K,[(h=(_=e.frontmatter)==null?void 0:_.customBanner)!=null&&h.title?(a(),c("h1",Q,v((g=(S=e.frontmatter)==null?void 0:S.customBanner)==null?void 0:g.title),1)):f("",!0),(n=(t=e.frontmatter)==null?void 0:t.customBanner)!=null&&n.description?(a(),c("p",R,v((s=(o=e.frontmatter)==null?void 0:o.customBanner)==null?void 0:s.description),1)):f("",!0),(p=(w=e.frontmatter)==null?void 0:w.customBanner)!=null&&p.tagline?(a(),c("p",{key:2,class:"tagline",innerHTML:(l=(y=e.frontmatter)==null?void 0:y.customBanner)==null?void 0:l.tagline},null,8,U)):f("",!0),e.buttons.length>0?(a(),c("div",W,[(a(!0),c(F,null,M(e.buttons,(r,m)=>(a(),O(k,{class:V(r.type),key:m,icon:r.icon,text:r.text,link:r.link,"icon-size":"18","text-size":"14"},null,8,["class","icon","text","link"]))),128))])):f("",!0),e.news.length?(a(),c("div",Y,[i("div",Z,[d[1]||(d[1]=i("div",{class:"load"},[i("div",{class:"loading"}),i("span",null,"正在发生")],-1)),i("small",{class:"more",onClick:d[0]||(d[0]=r=>e.showLenth=e.showLenth>1?1:e.news.length)},v(e.showLenth>1?"收起":"更多")+"("+v(e.news.length)+")",1)]),(a(!0),c(F,null,M(e.news,(r,m)=>X((a(),c("div",{key:m},[i("div",$,v(r.pubDate),1),i("a",{innerHTML:r.description,href:r.link,target:"_blank"},null,8,ee)])),[[E,m<e.showLenth]])),128))])):f("",!0)])],4)}const oe=j(J,[["render",te],["__scopeId","data-v-d5f4233c"],["__file","CustomBanner.vue"]]);export{oe as default};
