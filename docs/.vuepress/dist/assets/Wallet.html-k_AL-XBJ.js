import{_ as l,c as o,b as p,a as s,d as a,e as t,o as i,r}from"./app-VNCnYTUc.js";const c={},d={href:"https://learnblockchain.cn/article/784",target:"_blank",rel:"noopener noreferrer"},u={href:"https://eips.ethereum.org/EIPS/eip-1193",target:"_blank",rel:"noopener noreferrer"},k={href:"https://eips.ethereum.org/EIPS/eip-6963",target:"_blank",rel:"noopener noreferrer"},m={href:"https://reown.com/appkit",target:"_blank",rel:"noopener noreferrer"},h={href:"https://metamask.github.io/test-dapp/",target:"_blank",rel:"noopener noreferrer"};function v(b,n){const e=r("ExternalLinkIcon");return i(),o("div",null,[n[10]||(n[10]=p('<h2 id="真正掌控你的资产" tabindex="-1"><a class="header-anchor" href="#真正掌控你的资产"><span>真正掌控你的资产</span></a></h2><p>传统的资产实际由中心化机构控，例如：银行账户中的资金由银行托管，用户需依赖密码或身份验证访问，但银行可冻结账户或限制交易（如涉嫌违规时），用户完全掌握私钥，独立控制资产。而使用 web3钱包，私钥仅存储在本地设备，即使钱包服务商停止运营，用户仍可通过助记词恢复资产。</p><p>而其弊端在于，用户对自己的助记词或者私钥负责，它无法被赋予身份ID，掌握私钥或者助记词即掌握了所有资产。当然这样的管理成本与理解成本，也不可避免的成为了前期大部分用户无法积极参与的原因之一。</p><p>随着社区基建的不断完善，钱包也在不断进化，如硬件钱包、AA钱包、MPC钱包、多签钱包、托管钱包（后续会讲到这种钱包）等都在不断做着降低用户门槛的努力，且效果显著。</p><p>事实上我们通过密码学，真正赋予了每个人掌握自己资产的能力，而非依赖某个中心化的机构（即使他们看起来是那么可靠光鲜）。而这一切的发生不仅仅需要技术的发展，更多的是共识。我们创造了一个普遍的共识，共同认可了一个事物的价值，这是一个很了不起的事情！</p><h2 id="hd钱包的实现原理" tabindex="-1"><a class="header-anchor" href="#hd钱包的实现原理"><span>HD钱包的实现原理</span></a></h2><p>HD 钱包（Hierarchical Deterministic Wallets）是在 BIP32 中提出的为了避免管理一堆私钥的麻烦提出的分层推导方案。</p><p>BIP44 是给 BIP32 的分层增强了路径定义规范，同时增加了对多币种的支持。</p><p>BIP39 则通过定义助记词让种子的备份更友好。</p><p>通常钱包的生成流程为：</p><ul><li>​种子生成：通过128/256位熵源+BIP-39词库生成助记词（如24个英文单词）</li><li>​主密钥派生：PBKDF2-HMAC-SHA512算法将助记词扩展为512位种子</li><li>​分层派生路径：按m/purpose&#39;/coin_type&#39;/account&#39;/change/address_index结构生成子密钥</li><li>典型路径：比特币为m/44&#39;/0&#39;/0&#39;/0/0，以太坊为m/44&#39;/60&#39;/0&#39;/0/0</li><li>​地址生成：采用非压缩公钥→Keccak256哈希→取后20字节生成ETH地址</li></ul><p>通常助记词与生成的私钥会使用如AES之类的加密算法加密处理后，存在钱包APP或者插件本地，当用户需要发起交易时，通过输入密码获取私钥完成签名后，push交易到指定的节点，完成交易。</p>',12)),s("p",null,[n[1]||(n[1]=a("详细技术原理可查看：")),s("a",d,[n[0]||(n[0]=a("HDWallet 原理分析")),t(e)])]),n[11]||(n[11]=s("h2",{id:"钱包与dapp交互",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#钱包与dapp交互"},[s("span",null,"钱包与Dapp交互")])],-1)),n[12]||(n[12]=s("p",null,"现在我们已经有了自己的钱包，但他本质上只是一个私钥加密存储器，我们需要接入生态dapp，这需要钱包能够拦截到dapp中发起的交易签名请求，然后通过用户输入密码的方式解出私钥，完成签名构建，发起交易。",-1)),n[13]||(n[13]=s("p",null,"这个时候就需要一套普适性的通信协议：",-1)),s("ul",null,[s("li",null,[n[3]||(n[3]=a("​EIP-1193：标准化Provider接口，实现eth_requestAccounts账户请求、eth_sendTransaction交易签名等基础功能 ")),s("a",u,[n[2]||(n[2]=a("EIP-1193官方文档")),t(e)])]),s("li",null,[n[5]||(n[5]=a("EIP-6963：解决多钱包冲突问题，通过window.ethereum.providers数组暴露所有可用钱包（这个通常是针对浏览器安装了多个插件钱包的情况） ")),s("a",k,[n[4]||(n[4]=a("EIP-6963官方文档")),t(e)])]),s("li",null,[n[7]||(n[7]=a("WalletConnect：端到端加密的远程协议，支持二维码扫描、深层链接(Deep Link)和推送通知 ")),s("a",m,[n[6]||(n[6]=a("Walletconnect")),t(e)])])]),n[14]||(n[14]=p(`<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token comment">// DApp连接代码示例</span></span>
<span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> window<span class="token punctuation">.</span>ethereum <span class="token operator">!==</span> <span class="token string">&#39;undefined&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> accounts <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">.</span>ethereum<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span> </span>
<span class="line">        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&#39;eth_requestAccounts&#39;</span> </span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">const</span> provider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ethers<span class="token punctuation">.</span>BrowserProvider</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>ethereum<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> connector <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WalletConnect</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">projectId</span><span class="token operator">:</span> <span class="token string">&#39;YOUR_PROJECT_ID&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">chains</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;eip155:1&#39;</span><span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">await</span> connector<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1)),s("p",null,[n[9]||(n[9]=a("同时 Metamask 的官方开源demo也有很好的参考价值 ")),s("a",h,[n[8]||(n[8]=a("点击查看")),t(e)])]),n[15]||(n[15]=p('<h2 id="账户抽象-aa钱包" tabindex="-1"><a class="header-anchor" href="#账户抽象-aa钱包"><span>账户抽象(AA钱包)</span></a></h2><p>便携中...</p><h2 id="mpc钱包" tabindex="-1"><a class="header-anchor" href="#mpc钱包"><span>MPC钱包</span></a></h2><p>便携中...</p><h2 id="硬件钱包" tabindex="-1"><a class="header-anchor" href="#硬件钱包"><span>硬件钱包</span></a></h2><p>便携中...</p><h2 id="主流钱包" tabindex="-1"><a class="header-anchor" href="#主流钱包"><span>主流钱包</span></a></h2><p>便携中...</p>',8))])}const f=l(c,[["render",v],["__file","Wallet.html.vue"]]),y=JSON.parse('{"path":"/docs/tech/Wallet.html","title":"钱包-真正的控制权","lang":"zh-CN","frontmatter":{"title":"钱包-真正的控制权","date":"2021-10-20T23:30:52.000Z","description":"真正掌控你的资产 传统的资产实际由中心化机构控，例如：银行账户中的资金由银行托管，用户需依赖密码或身份验证访问，但银行可冻结账户或限制交易（如涉嫌违规时），用户完全掌握私钥，独立控制资产。而使用 web3钱包，私钥仅存储在本地设备，即使钱包服务商停止运营，用户仍可通过助记词恢复资产。 而其弊端在于，用户对自己的助记词或者私钥负责，它无法被赋予身份ID，...","head":[["meta",{"property":"og:url","content":"https://0xspace.tech/docs/tech/Wallet.html"}],["meta",{"property":"og:site_name","content":"0xSpace-web3发展史|合约开发|区块链学习|转行web3|区块链教程|web3教程|区块链导航"}],["meta",{"property":"og:title","content":"钱包-真正的控制权"}],["meta",{"property":"og:description","content":"真正掌控你的资产 传统的资产实际由中心化机构控，例如：银行账户中的资金由银行托管，用户需依赖密码或身份验证访问，但银行可冻结账户或限制交易（如涉嫌违规时），用户完全掌握私钥，独立控制资产。而使用 web3钱包，私钥仅存储在本地设备，即使钱包服务商停止运营，用户仍可通过助记词恢复资产。 而其弊端在于，用户对自己的助记词或者私钥负责，它无法被赋予身份ID，..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-03-04T06:59:21.000Z"}],["meta",{"property":"article:published_time","content":"2021-10-20T23:30:52.000Z"}],["meta",{"property":"article:modified_time","content":"2025-03-04T06:59:21.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"钱包-真正的控制权\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2021-10-20T23:30:52.000Z\\",\\"dateModified\\":\\"2025-03-04T06:59:21.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"真正掌控你的资产","slug":"真正掌控你的资产","link":"#真正掌控你的资产","children":[]},{"level":2,"title":"HD钱包的实现原理","slug":"hd钱包的实现原理","link":"#hd钱包的实现原理","children":[]},{"level":2,"title":"钱包与Dapp交互","slug":"钱包与dapp交互","link":"#钱包与dapp交互","children":[]},{"level":2,"title":"账户抽象(AA钱包)","slug":"账户抽象-aa钱包","link":"#账户抽象-aa钱包","children":[]},{"level":2,"title":"MPC钱包","slug":"mpc钱包","link":"#mpc钱包","children":[]},{"level":2,"title":"硬件钱包","slug":"硬件钱包","link":"#硬件钱包","children":[]},{"level":2,"title":"主流钱包","slug":"主流钱包","link":"#主流钱包","children":[]}],"git":{"createdTime":1740048194000,"updatedTime":1741071561000,"contributors":[{"name":"keylen","email":"kelenworks@gmail.com","commits":3}]},"filePathRelative":"docs/tech/Wallet.md","autoDesc":true}');export{f as comp,y as data};
